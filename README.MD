# ğŸ± Laser Cat Tracker

Projeto que integra **Arduino**, **Python** e **PostgreSQL** para controlar e rastrear os movimentos de um laser para gatos.

Cada movimentaÃ§Ã£o completa do laser Ã© capturada e salva em um banco de dados relacional para posterior anÃ¡lise de comportamento.

---

## ğŸ“† Estrutura do Projeto

```
laser-cat-tracker/
â”œâ”€â”€ README.md
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ captura_movimentos.py
â”‚   â””â”€â”€ arduino/
â”‚       â””â”€â”€ laser_tracker.ino
```

---

## ğŸ“š DescriÃ§Ã£o do Projeto

1. O **Arduino** movimenta dois servos motores controlando um laser.
2. Cada posiÃ§Ã£o `(X, Y)` Ã© enviada via **Serial** para o computador.
3. O **Python** lÃª essas posiÃ§Ãµes.
4. Quando o Arduino termina o movimento e envia o comando `END`, o Python:
   - Salva a posiÃ§Ã£o final `(X, Y)` no banco **PostgreSQL**.
   - Registra o movimento no histÃ³rico.

---

## âš™ï¸ Requisitos

- Python 3.8+
- PostgreSQL 13+
- Arduino Nano / Deek-Robot (ou similar)
- Arduino IDE
- Git (opcional, para clonar)

**DependÃªncias Python:**

```txt
pyserial
psycopg2
python-dotenv
```

Instale com:

```bash
pip install -r requirements.txt
```

**Criando e ativando um ambiente virtual (venv):**

1. Criar um ambiente virtual:

```bash
python -m venv venv
```

2. Ativar o ambiente virtual:
- **Windows**:

```bash
venv\Scripts\activate
```

- **Linux/MacOS**:

```bash
source venv/bin/activate
```

3. Instalar as dependÃªncias dentro da venv:

```bash
pip install -r requirements.txt
```

---

## ğŸ”¢ VariÃ¡veis de Ambiente (definidas no script)

Configure suas variÃ¡veis de ambiente antes de rodar o script. Exemplo:

```dotenv
DB_NAME=Arduino
DB_USER=postgres
DB_PASSWORD=sua_senha_aqui
DB_HOST=localhost
DB_PORT=5432
SERIAL_PORT=COM5
```

**Onde:**

| VariÃ¡vel | DescriÃ§Ã£o |
|----------|------------|
| `DB_NAME` | Nome do banco de dados PostgreSQL |
| `DB_USER` | UsuÃ¡rio do banco |
| `DB_PASSWORD` | Senha do banco |
| `DB_HOST` | EndereÃ§o do servidor (normalmente localhost) |
| `DB_PORT` | Porta do PostgreSQL (padrÃ£o 5432) |
| `SERIAL_PORT` | Porta serial do Arduino |

**Importante:**
- As variÃ¡veis devem ser carregadas com `dotenv` no script Python.

---

## ğŸ“… Ciclo Completo de ExecuÃ§Ã£o

### 1. Programar o Arduino

- Abra a **Arduino IDE**.
- Carregue o arquivo `src/arduino/laser_tracker.ino` para o Arduino.
- Certifique-se que a porta Serial estÃ¡ correta (ex: COM5).

### 2. Rodar o script Python

- Ative seu ambiente virtual (se criado):

```bash
# Windows
venv\Scripts\activate

# Linux/MacOS
source venv/bin/activate
```

- Execute o script:

```bash
python src/captura_movimentos.py
```

O script irÃ¡:

- Verificar se o banco de dados existe (e criar se nÃ£o existir).
- Criar a tabela `movimentos_laser` se nÃ£o existir.
- Capturar dados `(X, Y)` do Arduino.
- Salvar o Ãºltimo `(X, Y)` de cada movimento completo apÃ³s `END`.

### 3. Visualizar os dados

Cada movimento serÃ¡ mostrado no terminal, e salvo no PostgreSQL.


---

## ğŸ’¾ Estrutura da Tabela no PostgreSQL

Tabela `movimentos_laser`:

| Campo         | Tipo         | DescriÃ§Ã£o |
|---------------|--------------|-----------|
| `id`          | SERIAL        | ID Ãºnico |
| `timestamp`   | TIMESTAMP     | Data/hora da gravaÃ§Ã£o |
| `movimento_num` | INTEGER     | NÃºmero sequencial do movimento |
| `x_pos`       | INTEGER       | PosiÃ§Ã£o X no final do movimento |
| `y_pos`       | INTEGER       | PosiÃ§Ã£o Y no final do movimento |

---

## ğŸ‘¥ Sobre

Este projeto foi desenvolvido para demonstrar a integraÃ§Ã£o entre dispositivos fÃ­sicos (Arduino) e bancos de dados relacionais (PostgreSQL) usando Python como ponte.

Ideal para projetos de IoT, automaÃ§Ã£o e estudo de comunicaÃ§Ã£o Serial!


---

## ğŸ’¡ Comandos RÃ¡pidos

```bash
# Clonar o repositÃ³rio
git clone https://github.com/SamuelLucasVieira/laser-cat-tracker.git
cd laser-cat-tracker

# Criar e ativar o ambiente virtual
python -m venv venv
venv\Scripts\activate  # Windows
# ou
source venv/bin/activate  # Linux/MacOS

# Instalar dependÃªncias
pip install -r requirements.txt

# Executar\python src/captura_movimentos.py
```