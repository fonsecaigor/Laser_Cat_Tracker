# üê± Laser Cat Tracker

Projeto que integra **Arduino**, **Python** e **PostgreSQL** para controlar e rastrear os movimentos de um laser para gatos.

Cada movimenta√ß√£o completa do laser √© capturada e salva em um banco de dados relacional para posterior an√°lise de comportamento.

---

## üìÜ Estrutura do Projeto

```
laser-cat-tracker/
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ captura_movimentos.py
‚îÇ   ‚îî‚îÄ‚îÄ arduino/
‚îÇ       ‚îî‚îÄ‚îÄ laser_tracker.ino
```

---

## üìö Descri√ß√£o do Projeto

1. O **Arduino** movimenta dois servos motores controlando um laser.
2. Cada posi√ß√£o `(X, Y)` √© enviada via **Serial** para o computador.
3. O **Python** l√™ essas posi√ß√µes.
4. Quando o Arduino termina o movimento e envia o comando `END`, o Python:
   - Salva a posi√ß√£o final `(X, Y)` no banco **PostgreSQL**.
   - Registra o movimento no hist√≥rico.

---

## ‚öôÔ∏è Requisitos

- Python 3.8+
- PostgreSQL 13+
- Arduino Nano / Deek-Robot (ou similar)
- Arduino IDE
- Git (opcional, para clonar)

**Depend√™ncias Python:**

```txt
pyserial
psycopg2
python-dotenv
```

Instale com:

```bash
pip install -r requirements.txt
```

**Criando e ativando um ambiente virtual (venv):**

1. Criar um ambiente virtual:

```bash
python -m venv venv
```

2. Ativar o ambiente virtual:
- **Windows**:

```bash
venv\Scripts\activate
```

- **Linux/MacOS**:

```bash
source venv/bin/activate
```

3. Instalar as depend√™ncias dentro da venv:

```bash
pip install -r requirements.txt
```

---

## üî¢ Vari√°veis de Ambiente (definidas no script)

Configure suas vari√°veis de ambiente antes de rodar o script. Exemplo:

```dotenv
DB_NAME=Arduino
DB_USER=postgres
DB_PASSWORD=sua_senha_aqui
DB_HOST=localhost
DB_PORT=5432
SERIAL_PORT=COM5
```

**Onde:**

| Vari√°vel | Descri√ß√£o |
|----------|------------|
| `DB_NAME` | Nome do banco de dados PostgreSQL |
| `DB_USER` | Usu√°rio do banco |
| `DB_PASSWORD` | Senha do banco |
| `DB_HOST` | Endere√ßo do servidor (normalmente localhost) |
| `DB_PORT` | Porta do PostgreSQL (padr√£o 5432) |
| `SERIAL_PORT` | Porta serial do Arduino |

**Importante:**
- As vari√°veis devem ser carregadas com `dotenv` no script Python.

---

## üìÖ Ciclo Completo de Execu√ß√£o

### 1. Programar o Arduino

- Abra a **Arduino IDE**.
- Carregue o arquivo `src/arduino/laser_tracker.ino` para o Arduino.
- Certifique-se que a porta Serial est√° correta (ex: COM5).

### 2. Rodar o script Python

- Ative seu ambiente virtual (se criado):

```bash
# Windows
venv\Scripts\activate

# Linux/MacOS
source venv/bin/activate
```

- Execute o script:

```bash
python src/captura_movimentos.py
```

O script ir√°:

- Verificar se o banco de dados existe (e criar se n√£o existir).
- Criar a tabela `movimentos_laser` se n√£o existir.
- Capturar dados `(X, Y)` do Arduino.
- Salvar o √∫ltimo `(X, Y)` de cada movimento completo ap√≥s `END`.

### 3. Visualizar os dados

Cada movimento ser√° mostrado no terminal, e salvo no PostgreSQL.


---

## üíæ Estrutura da Tabela no PostgreSQL

Tabela `movimentos_laser`:

| Campo         | Tipo         | Descri√ß√£o |
|---------------|--------------|-----------|
| `id`          | SERIAL        | ID √∫nico |
| `timestamp`   | TIMESTAMP     | Data/hora da grava√ß√£o |
| `movimento_num` | INTEGER     | N√∫mero sequencial do movimento |
| `x_pos`       | INTEGER       | Posi√ß√£o X no final do movimento |
| `y_pos`       | INTEGER       | Posi√ß√£o Y no final do movimento |

---

## üë• Sobre

Este projeto foi desenvolvido para demonstrar a integra√ß√£o entre dispositivos f√≠sicos (Arduino) e bancos de dados relacionais (PostgreSQL) usando Python como ponte.

Ideal para projetos de IoT, automa√ß√£o e estudo de comunica√ß√£o Serial!


---

## üí° Comandos R√°pidos

```bash
# Clonar o reposit√≥rio
git clone https://github.com/SamuelLucasVieira/laser-cat-tracker.git
cd laser-cat-tracker/src

# Criar e ativar o ambiente virtual
python -m venv venv
venv\Scripts\activate  # Windows
# ou
source venv/bin/activate  # Linux/MacOS

# Instalar depend√™ncias
pip install -r requirements.txt

# Executar/python captura_movimentos.py
python captura_movimentos.py

# Executar/python realtime_dashboard.py
streamlit run realtime_dashboard.py

```
